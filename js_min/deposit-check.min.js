var app=angular.module("MyDepositCheck",["ngMaterial","ngMessages","smart-table"]);app.filter("dayFilter",function(e){return function(e,t){var a=function(e){var a=new Date;if(a.setDate(a.getDate()-t),null!=e.deposit_regis)var r=e.deposit_regis,i=r.split(" "),n=i[0],s=i[1],o=new Date(n.split("-")[0],n.split("-")[1],n.split("-")[2],s.split(":")[0],s.split(":")[1],s.split(":")[2]);else o=null;return o>=a};return e.filter(a)}}),app.controller("DepositCheck",["Resource","$interval","$filter",function(e,t,a){var r,i=this;this.displayed=[],this.callServer=function(t){r=t,i.isLoading=!0;var a=t.pagination,n=a.start||0,s=a.number||10;e.getPage(n,s,t).then(function(e){i.displayed=e.data,t.pagination.numberOfPages=e.numberOfPages,i.isLoading=!1})},t(function(){var t=r,a=t.pagination,n=a.start||0,s=a.number||10;e.getPage(n,s,t).then(function(e){i.displayed=e.data,t.pagination.numberOfPages=e.numberOfPages,i.isLoading=!1})},1e4)}]),app.factory("Resource",["$http","$q","$filter","$timeout",function(e,t,a,r){function i(e){var t=e.substring(0,1),a=(e.substring(1,7),e.substring(7)),r=t+"------"+a;return r}function n(n,o,p){var c=t.defer(),l=e({method:"get",url:WPURLS.templateurl+"/php/get-deposit-state.php",data:{},headers:{"Content-Type":"application/x-www-form-urlencoded"}});return l.success(function(e){s=e;for(x in s)null==s[x].deposit_type_name&&(s[x].deposit_type_name="/images/WaitTransfer.gif"),s[x].hide_deposit_account=i(s[x].deposit_account);var t=s;s=a("dayFilter")(s,3);var l;angular.isUndefined(p.search.predicateObject)&&(p.search.predicateObject={}),l=0!=Object.keys(p.search.predicateObject).length?a("filter")(t,p.search.predicateObject):s,p.sort.predicate&&(l=a("orderBy")(l,p.sort.predicate,p.sort.reverse));var u=l.slice(n,n+o);r(function(){c.resolve({data:u,numberOfPages:Math.ceil(l.length/o)})},1500)}),c.promise}var s=[];return{getPage:n}}]);